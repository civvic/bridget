<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="HTMX + FastHTML - Server for Jupyter Notebooks">

<title>Bridget ‚Äì bridget</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-000f0825b9c55ed21d14970d810c14a9.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="Bridget ‚Äì bridget">
<meta property="og:description" content="HTMX + FastHTML - Server for Jupyter Notebooks">
<meta property="og:site_name" content="bridget">
<meta name="twitter:title" content="Bridget ‚Äì bridget">
<meta name="twitter:description" content="HTMX + FastHTML - Server for Jupyter Notebooks">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">bridget</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./bridget.html">Bridget</a></li><li class="breadcrumb-item"><a href="./bridget.html">Bridget</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bridget</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Core Components</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./helpers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Helpers</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./jstransform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Javascript import transform</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./fasthtml_patching.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FastHTML patching</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./route_provider.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Routes provider</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Bridge</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bridge_widget.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bridge widget helpers</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./logger.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Loggers</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bridge.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bridge helpers</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bridge_plugins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bridge plugins</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Notebook State</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nb.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Notebook objects</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nb_hooks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Notebook/IPython hooks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nb_state.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Notebook state</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Bridget</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bridget.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Bridget</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Components</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./details_json.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">DetailsJSON</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">JavaScript &amp; Extensions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./javascript_extensions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">JavaScript &amp; Extensions</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Examples</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./examples/quickstart.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">quickstart.html</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./examples/htmx_examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">HTMX Examples</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true">
 <span class="menu-text">(very) WIP</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./widget.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Widget (very WIP)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nb_outline.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TBD</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./output_edit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Editable Outputs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./anydoc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">AnyDoc</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prompt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prompt</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nb_mcp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TBD</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nbdev_rt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">nbdev_rt</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#why-bridget" id="toc-why-bridget" class="nav-link active" data-scroll-target="#why-bridget">Why Bridget?</a>
  <ul class="collapse">
  <li><a href="#the-front-end-challenge" id="toc-the-front-end-challenge" class="nav-link" data-scroll-target="#the-front-end-challenge">The Front-end Challenge</a></li>
  <li><a href="#enter-fasthtml-and-htmx" id="toc-enter-fasthtml-and-htmx" class="nav-link" data-scroll-target="#enter-fasthtml-and-htmx">Enter FastHTML and HTMX</a></li>
  <li><a href="#the-bridget-solution" id="toc-the-bridget-solution" class="nav-link" data-scroll-target="#the-bridget-solution">The Bridget Solution</a></li>
  </ul></li>
  <li><a href="#helpers" id="toc-helpers" class="nav-link" data-scroll-target="#helpers">Helpers</a>
  <ul class="collapse">
  <li><a href="#clientp" id="toc-clientp" class="nav-link" data-scroll-target="#clientp">ClientP</a>
  <ul class="collapse">
  <li><a href="#clientp-1" id="toc-clientp-1" class="nav-link" data-scroll-target="#clientp-1">ClientP</a></li>
  </ul></li>
  <li><a href="#bridget-utils" id="toc-bridget-utils" class="nav-link" data-scroll-target="#bridget-utils">Bridget utils</a>
  <ul class="collapse">
  <li><a href="#request2httpx_request" id="toc-request2httpx_request" class="nav-link" data-scroll-target="#request2httpx_request">request2httpx_request</a></li>
  <li><a href="#httpx_response_to_json" id="toc-httpx_response_to_json" class="nav-link" data-scroll-target="#httpx_response_to_json">httpx_response_to_json</a></li>
  <li><a href="#request2response" id="toc-request2response" class="nav-link" data-scroll-target="#request2response">request2response</a></li>
  <li><a href="#hashtml" id="toc-hashtml" class="nav-link" data-scroll-target="#hashtml">HasHTML</a></li>
  <li><a href="#hasft" id="toc-hasft" class="nav-link" data-scroll-target="#hasft">HasFT</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#bridgetclient" id="toc-bridgetclient" class="nav-link" data-scroll-target="#bridgetclient">BridgetClient</a>
  <ul class="collapse">
  <li><a href="#bridgetclient-1" id="toc-bridgetclient-1" class="nav-link" data-scroll-target="#bridgetclient-1">BridgetClient</a></li>
  </ul></li>
  <li><a href="#bridget-plugin" id="toc-bridget-plugin" class="nav-link" data-scroll-target="#bridget-plugin">Bridget plugin</a>
  <ul class="collapse">
  <li><a href="#get_bridget" id="toc-get_bridget" class="nav-link" data-scroll-target="#get_bridget">get_bridget</a></li>
  <li><a href="#bridget" id="toc-bridget" class="nav-link" data-scroll-target="#bridget">Bridget</a></li>
  <li><a href="#bridget-javascript-implementation-bridget.js" id="toc-bridget-javascript-implementation-bridget.js" class="nav-link" data-scroll-target="#bridget-javascript-implementation-bridget.js">Bridget JavaScript Implementation bridget.js</a>
  <ul class="collapse">
  <li><a href="#some-details" id="toc-some-details" class="nav-link" data-scroll-target="#some-details">Some details</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#get_app" id="toc-get_app" class="nav-link" data-scroll-target="#get_app">get_app</a>
  <ul class="collapse">
  <li><a href="#get_app-1" id="toc-get_app-1" class="nav-link" data-scroll-target="#get_app-1">get_app</a></li>
  </ul></li>
  <li><a href="#simple-widget" id="toc-simple-widget" class="nav-link" data-scroll-target="#simple-widget">Simple widget</a></li>
  <li><a href="#hydrate-tbd" id="toc-hydrate-tbd" class="nav-link" data-scroll-target="#hydrate-tbd">Hydrate (TBD)</a></li>
  <li><a href="#what-about-websockets-and-sse-support" id="toc-what-about-websockets-and-sse-support" class="nav-link" data-scroll-target="#what-about-websockets-and-sse-support">What about WebSockets and SSE Support?</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/civvic/bridget/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="bridget.html.md"><i class="bi bi-file-code"></i>CommonMark</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./bridget.html">Bridget</a></li><li class="breadcrumb-item"><a href="./bridget.html">Bridget</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Bridget</h1>
</div>

<div>
  <div class="description">
    HTMX + FastHTML - Server for Jupyter Notebooks
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<section id="why-bridget" class="level2">
<h2 class="anchored" data-anchor-id="why-bridget">Why Bridget?</h2>
<p>Jupyter notebooks serve two primary functions: 1. <strong>Exploratory/Educational</strong>: Interactive computing and learning 2. <strong>Development</strong>: Literate programming and package creation (via nbdev)</p>
<p>While code creation is well-served by various notebook environments (Jupyter, VSCode, Marimo, etc.), the display and interaction capabilities are often limited by IPython‚Äôs well-thought but basic and aging display system. Modern development requires:</p>
<ul>
<li>Rich data visualization</li>
<li>Interactive system integration</li>
<li>Better control over output rendering</li>
</ul>
<section id="the-front-end-challenge" class="level3">
<h3 class="anchored" data-anchor-id="the-front-end-challenge">The Front-end Challenge</h3>
<p>Notebooks already run in browsers (or browser-like environments), giving us access to powerful HTML/JavaScript capabilities. The front-end and kernel are inherently connected, suggesting we shouldn‚Äôt need additional communication layers.</p>
<p>However, the notebook ecosystem is fragmented: - Jupyter (nbclassic, Notebook, Lab): ipywidgets - VSCode/Cursor: Extensions - Marimo: Custom solutions - Google Colab: Proprietary package</p>
<p>This fragmentation forces users needing better display solutions to deal with complex, environment-specific tooling.</p>
</section>
<section id="enter-fasthtml-and-htmx" class="level3">
<h3 class="anchored" data-anchor-id="enter-fasthtml-and-htmx">Enter FastHTML and HTMX</h3>
<p>FastHTML provides an innovative approach to web apps, emphasizing HTML-first development through HTMX. While Jupyter support isn‚Äôt its core focus, FastHTML itself is developed using nbdev in notebooks.</p>
<p>Current FastHTML notebook integration: - Launches a separate Uvicorn server - Connects HTMX via standard HTTP/AJAX - Works across most notebook variants</p>
<p>This approach is general, clean and lightweight but involves spawning a full HTTP server with: - Multi-user capabilities (unnecessary for notebooks) - Async architecture (notebooks are sync) - Complex lifecycle management - Production-level features (overkill for notebook use) - IPython Javascript display object in each cell to trigger HTMX.</p>
</section>
<section id="the-bridget-solution" class="level3">
<h3 class="anchored" data-anchor-id="the-bridget-solution">The Bridget Solution</h3>
<p>Bridget proposes using a widget-based approach that: 1. <strong>Simplifies</strong>: Replaces HTTP server with direct widget communication 2. <strong>Generalizes</strong>: Works across notebook environments via AnyWidget 3. <strong>Extends</strong>: Enables creation of notebook-specific components 4. <strong>Integrates</strong>: Provides Python API for HTMX functionality</p>
<p>This proof-of-concept shows how we can maintain FastHTML‚Äôs powerful features while better adapting to the notebook environment‚Äôs unique characteristics and constraints.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Personal note: My interest here isn‚Äôt web apps, but notebook development.</p>
<p>I like ipywidgets, or at least the intention. I‚Äôve written several and used them in many personal projects. However, they‚Äôre a challenging piece of software with complicated tooling. They inherit all the nightmarish complexity of the JavaScript ecosystem, where the tooling is more involved than the language itself. AnyWidget is a step in the right direction, liberating us Pythonistas from the JS ecosystem. But the notebook part, the Python part, remains an unsolved problem in my opinion.</p>
<p>Of all solutions I‚Äôve explored for achieving full interactivity in notebooks, HTMX + FastHTML comes closest, feeling more natural and integrating better with the notebook environment.</p>
</div>
</div>
<!-- # Prologue -->
<div id="cell-6" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>bridge_cfg.auto_show <span class="op">=</span> <span class="va">True</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>bridge_cfg.auto_id <span class="op">=</span> <span class="va">True</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>These flags control automatic behaviors throughout this notebook. See <code>01_helpers.ipynb</code> for full configuration options.</p>
</section>
</section>
<section id="helpers" class="level1">
<h1>Helpers</h1>
<blockquote class="blockquote">
<p>Some convenience utils to work with FastHTML in Notebooks.</p>
</blockquote>
<div id="cell-9" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># nb = get_nb(show_logger=True, show_feedback=True, summary=True)</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># bridge = get_bridge(plugins=[HTMXCommanderPlugin()], wait=5)</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>bridge <span class="op">=</span> get_bridge(plugins<span class="op">=</span>[HTMXCommanderPlugin(), NBHooksPlugin()], show_logger<span class="op">=</span><span class="va">True</span>, summary<span class="op">=</span><span class="va">True</span>, wait<span class="op">=</span><span class="dv">5</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Bridget automatically loads required JavaScript libraries:</p>
<ol type="1">
<li>HTMX</li>
<li>FastHTML core scripts</li>
<li>Awesome gnat‚Äôs Scope and Surreal scripts</li>
<li>Bridge helpers</li>
</ol>
<p>These are loaded by default when creating a Bridget app. You can customize this by overriding defaults when creating the app (covered in app creation section)</p>
<section id="clientp" class="level2">
<h2 class="anchored" data-anchor-id="clientp">ClientP</h2>
<hr>
<p><a href="https://github.com/civvic/bridget/blob/main/bridget/bridget.py#L68" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="clientp-1" class="level3">
<h3 class="anchored" data-anchor-id="clientp-1">ClientP</h3>
<blockquote class="blockquote">
<pre><code> ClientP (*args, **kwargs)</code></pre>
</blockquote>
<p><em>HTTP client interface supporting REST operations (get, post, delete)</em></p>
</section>
</section>
<section id="bridget-utils" class="level2">
<h2 class="anchored" data-anchor-id="bridget-utils">Bridget utils</h2>
<hr>
<p><a href="https://github.com/civvic/bridget/blob/main/bridget/bridget.py#L78" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="request2httpx_request" class="level3">
<h3 class="anchored" data-anchor-id="request2httpx_request">request2httpx_request</h3>
<blockquote class="blockquote">
<pre><code> request2httpx_request (cli:httpx.AsyncClient,
                        http_request:dict[str,typing.Any])</code></pre>
</blockquote>
<p><em>Convert bridget request dict to httpx Request object</em></p>
<hr>
<p><a href="https://github.com/civvic/bridget/blob/main/bridget/bridget.py#L105" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="httpx_response_to_json" class="level3">
<h3 class="anchored" data-anchor-id="httpx_response_to_json">httpx_response_to_json</h3>
<blockquote class="blockquote">
<pre><code> httpx_response_to_json (response:httpx.Response)</code></pre>
</blockquote>
<p><em>Convert httpx Response to JSON dict with headers and content</em></p>
<hr>
<p><a href="https://github.com/civvic/bridget/blob/main/bridget/bridget.py#L97" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="request2response" class="level3">
<h3 class="anchored" data-anchor-id="request2response">request2response</h3>
<blockquote class="blockquote">
<pre><code> request2response (cli:httpx.AsyncClient, http_request)</code></pre>
</blockquote>
<p><em>Execute bridget request and return httpx Response</em></p>
<hr>
<p><a href="https://github.com/civvic/bridget/blob/main/bridget/bridget.py#L90" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="hashtml" class="level3">
<h3 class="anchored" data-anchor-id="hashtml">HasHTML</h3>
<blockquote class="blockquote">
<pre><code> HasHTML (*args, **kwargs)</code></pre>
</blockquote>
<p><em>Objects that can render themselves as HTML strings</em></p>
<hr>
<p><a href="https://github.com/civvic/bridget/blob/main/bridget/bridget.py#L87" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="hasft" class="level3">
<h3 class="anchored" data-anchor-id="hasft">HasFT</h3>
<blockquote class="blockquote">
<pre><code> HasFT (*args, **kwargs)</code></pre>
</blockquote>
<p><em>Objects that can convert themselves to FastHTML FT components</em></p>
<div id="cell-19" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="at">@FC.patch</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> _ipython_display_(<span class="va">self</span>: Response):</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># dhdl = DisplayId()</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># dhdl.display(self.text)</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    IDISPLAY(HTML(<span class="va">self</span>.text))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
</section>
</section>
<section id="bridgetclient" class="level1">
<h1>BridgetClient</h1>
<blockquote class="blockquote">
<p>A mixin class that wraps FastHTML and Client functionality for displaying and mounting components.</p>
</blockquote>
<p>Display: - FT &amp; objects with <code>__ft__</code> or <code>__html__</code> - Mappings in the form of HTTP requests - URLs</p>
<p>Mount: - APIRouter or RouteProvider</p>
<hr>
<p><a href="https://github.com/civvic/bridget/blob/main/bridget/bridget.py#L125" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="bridgetclient-1" class="level3">
<h3 class="anchored" data-anchor-id="bridgetclient-1">BridgetClient</h3>
<blockquote class="blockquote">
<pre><code> BridgetClient ()</code></pre>
</blockquote>
<p><em>A simple wrapper around <code>FastHTML</code> and <code>Client</code>.</em></p>
<p><code>BridgeClient</code> is a mixin class that provides:</p>
<ol type="1">
<li><strong>Client functionality</strong>:</li>
<li><strong>Display functionality</strong>: Renders FastHTML objects and route responses in notebook cells</li>
<li><strong>Component mounting</strong>: Helper for mounting route providers</li>
</ol>
<p>It serves as a mixin class for <a href="https://civvic.github.io/bridget/bridget.html#bridget"><code>Bridget</code></a>, which provides the full HTMX integration.</p>
<p>The class handles different types of ‚Äúbridgeable‚Äù content: - FastHTML objects (FT) - Objects with <code>__ft__</code> or <code>__html__</code> methods - Route paths - Request mappings</p>
<div id="cell-23" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>brt_cli <span class="op">=</span> BridgetClient().setup()</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>app, rt <span class="op">=</span> brt_cli.app, brt_cli.app.route</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>brt_cli()<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
404 Not Found
<brd-mark id="884db9a043bea536b92afc911933b57f"></brd-mark>
</div>
</div>
<div id="cell-24" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="at">@app.get</span>(<span class="st">"/"</span>)  <span class="co"># type: ignore</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> home():</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># return "&lt;strong&gt;Config&lt;/strong&gt;: " + str(bridge_cfg.as_dict())</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># return Span(Strong('Config'), ': ' + str(bridge_cfg.as_dict()))</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> DetailsJSON(bridge_cfg.as_dict(), summary<span class="op">=</span><span class="st">'Bridget Config'</span>).__ft__()</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>brt_cli()<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cell-25" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="at">@rt</span>(<span class="st">"/hi"</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get():</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">'Hi there'</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>http_request <span class="op">=</span> {</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'upload'</span>: {},</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'headers'</span>: {</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">'HX-Request'</span>: <span class="st">'true'</span>,</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">'HX-Current-URL'</span>: <span class="st">'vscode-webview://1ql27b...er'</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'headerNames'</span>: {<span class="st">'hx-request'</span>: <span class="st">'HX-Request'</span>, <span class="st">'hx-current-url'</span>: <span class="st">'HX-Current-URL'</span>},</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">'status'</span>: <span class="dv">0</span>,</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">'method'</span>: <span class="st">'GET'</span>,</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">'url'</span>: <span class="st">'/hi'</span>,</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">'async'</span>: <span class="va">True</span>,</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">'timeout'</span>: <span class="dv">0</span>,</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">'withCredentials'</span>: <span class="va">False</span>,</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">'body'</span>: <span class="va">None</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> brt_cli._response(http_request)</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>test_eq(response.status_code, <span class="dv">200</span>)</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>test_eq(response.text, <span class="st">'Hi there'</span>)</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>console.print_json(data<span class="op">=</span>(json_resp <span class="op">:=</span> httpx_response_to_json(response)))</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>test_eq(json_resp[<span class="st">'status'</span>], <span class="dv">200</span>)</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>test_eq(json_resp[<span class="st">'data'</span>], <span class="st">'Hi there'</span>)</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>test_eq(json_resp[<span class="st">'headers'</span>][<span class="st">'content-length'</span>], <span class="st">'8'</span>)</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>response</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="font-weight: bold">{</span>
  <span style="color: #000080; text-decoration-color: #000080; font-weight: bold">"headers"</span>: <span style="font-weight: bold">{</span>
    <span style="color: #000080; text-decoration-color: #000080; font-weight: bold">"vary"</span>: <span style="color: #008000; text-decoration-color: #008000">"HX-Request, HX-History-Restore-Request"</span>,
    <span style="color: #000080; text-decoration-color: #000080; font-weight: bold">"content-length"</span>: <span style="color: #008000; text-decoration-color: #008000">"8"</span>,
    <span style="color: #000080; text-decoration-color: #000080; font-weight: bold">"content-type"</span>: <span style="color: #008000; text-decoration-color: #008000">"text/html; charset=utf-8"</span>,
    <span style="color: #000080; text-decoration-color: #000080; font-weight: bold">"last-modified"</span>: <span style="color: #008000; text-decoration-color: #008000">"Wed, 03 Dec 2025 14:22:36 GMT"</span>,
    <span style="color: #000080; text-decoration-color: #000080; font-weight: bold">"cache-control"</span>: <span style="color: #008000; text-decoration-color: #008000">"no-store, no-cache, must-revalidate"</span>
  <span style="font-weight: bold">}</span>,
  <span style="color: #000080; text-decoration-color: #000080; font-weight: bold">"status"</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">200</span>,
  <span style="color: #000080; text-decoration-color: #000080; font-weight: bold">"statusText"</span>: <span style="color: #008000; text-decoration-color: #008000">"OK"</span>,
  <span style="color: #000080; text-decoration-color: #000080; font-weight: bold">"data"</span>: <span style="color: #008000; text-decoration-color: #008000">"Hi there"</span>,
  <span style="color: #000080; text-decoration-color: #000080; font-weight: bold">"xml"</span>: <span style="color: #800080; text-decoration-color: #800080; font-style: italic">null</span>,
  <span style="color: #000080; text-decoration-color: #000080; font-weight: bold">"finalUrl"</span>: <span style="color: #008000; text-decoration-color: #008000">"http://nb/hi"</span>
<span style="font-weight: bold">}</span>
</pre>

<brd-mark id="b044f5250-b2e327cd-fd825ee6-76653548"></brd-mark>
</div>
<div class="cell-output cell-output-display">
Hi there
<brd-mark id="bd5610cbf-6392de39-4751bbca-b2861446"></brd-mark>
</div>
</div>
<div id="cell-26" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>brt_cli(http_request)<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
Hi there
<brd-mark id="09003df5a195d6ab98c71c46b3d9af96"></brd-mark>
</div>
</div>
<div id="cell-27" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Buttons:</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> __ft__(<span class="va">self</span>):</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>            Button(garlic<span class="op">=</span><span class="va">True</span>, hx_get<span class="op">=</span><span class="st">'/test'</span>, hx_select<span class="op">=</span><span class="st">'button[vampire]'</span>, hx_swap<span class="op">=</span><span class="st">'afterend'</span>)(_n,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>                Style(<span class="va">self</span>._css_.<span class="bu">format</span>(<span class="st">'hsl(264 80</span><span class="sc">% 47%</span><span class="st">)'</span>, <span class="st">'hsl(264 80</span><span class="sc">% 60%</span><span class="st">)'</span>)),</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>                <span class="st">'garlic '</span>, Span(<span class="st">'üßÑ'</span>, cls<span class="op">=</span><span class="st">'icon'</span>),</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>            _n), _n,</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>            Button(vampire<span class="op">=</span><span class="va">True</span>, hx_get<span class="op">=</span><span class="st">'/test'</span>, hx_select<span class="op">=</span><span class="st">'button[garlic]'</span>, hx_swap<span class="op">=</span><span class="st">'afterend'</span>)(_n,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>                Style(<span class="va">self</span>._css_.<span class="bu">format</span>(<span class="st">'hsl(150 80</span><span class="sc">% 47%</span><span class="st">)'</span>, <span class="st">'hsl(150 80</span><span class="sc">% 60%</span><span class="st">)'</span>)), </span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>                <span class="st">'vampire '</span>, Span(<span class="st">'üßõ'</span>, cls<span class="op">=</span><span class="st">'icon'</span>),</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>            _n), _n,</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    _css_ <span class="op">=</span> <span class="st">'''</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="st">    me </span><span class="sc">{{</span><span class="st"> margin: 4px; padding: 10px 30px; min-width: 80px; background: </span><span class="sc">{0}</span><span class="st">; border-bottom: 0.5rem solid hsl(264 80</span><span class="sc">% 20%</span><span class="st">); </span><span class="sc">}}</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="st">    me </span><span class="sc">{{</span><span class="st"> color: antiquewhite; font-size: 14pt; font-variant: all-small-caps; font-weight: bold; </span><span class="sc">}}</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="st">    me:hover </span><span class="sc">{{</span><span class="st"> background: </span><span class="sc">{1}</span><span class="st">; </span><span class="sc">}}</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="st">    me span.icon </span><span class="sc">{{</span><span class="st"> font-size:16pt; </span><span class="sc">}}</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="st">'''</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cell-28" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="at">@rt</span>(<span class="st">"/test"</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get():</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Buttons()</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>http_request <span class="op">=</span> {</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'headers'</span>: {<span class="st">'hx-request'</span>: <span class="st">'1'</span>},</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'method'</span>: <span class="st">'GET'</span>,</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'url'</span>: <span class="st">'http://nb/test'</span>,</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> brt_cli._response(http_request)</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>display(Markdown(<span class="ss">f"```HTML</span><span class="ch">\n</span><span class="sc">{</span>r<span class="sc">.</span>text<span class="sc">}</span><span class="ch">\n</span><span class="ss">```"</span>))</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>r</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> garlic hx-get</span><span class="op">=</span><span class="st">"/test"</span><span class="ot"> hx-select</span><span class="op">=</span><span class="st">"button[vampire]"</span><span class="ot"> hx-swap</span><span class="op">=</span><span class="st">"afterend"</span><span class="dt">&gt;</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>   <span class="dt">&lt;</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    me { <span class="kw">margin</span><span class="ch">:</span> <span class="dv">4</span><span class="dt">px</span><span class="op">;</span> <span class="kw">padding</span><span class="ch">:</span> <span class="dv">10</span><span class="dt">px</span> <span class="dv">30</span><span class="dt">px</span><span class="op">;</span> <span class="kw">min-width</span><span class="ch">:</span> <span class="dv">80</span><span class="dt">px</span><span class="op">;</span> <span class="kw">background</span><span class="ch">:</span> <span class="fu">hsl(</span><span class="dv">264</span> <span class="dv">80</span><span class="dt">%</span> <span class="dv">47</span><span class="dt">%</span><span class="fu">)</span><span class="op">;</span> <span class="kw">border-bottom</span><span class="ch">:</span> <span class="dv">0.5</span><span class="dt">rem</span> <span class="dv">solid</span> <span class="fu">hsl(</span><span class="dv">264</span> <span class="dv">80</span><span class="dt">%</span> <span class="dv">20</span><span class="dt">%</span><span class="fu">)</span><span class="op">;</span> }</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    me { <span class="kw">color</span><span class="ch">:</span> <span class="cn">antiquewhite</span><span class="op">;</span> <span class="kw">font-size</span><span class="ch">:</span> <span class="dv">14</span><span class="dt">pt</span><span class="op">;</span> <span class="kw">font-variant</span><span class="ch">:</span> <span class="dv">all-small-caps</span><span class="op">;</span> <span class="kw">font-weight</span><span class="ch">:</span> <span class="dv">bold</span><span class="op">;</span> }</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    me<span class="in">:hover</span> { <span class="kw">background</span><span class="ch">:</span> <span class="fu">hsl(</span><span class="dv">264</span> <span class="dv">80</span><span class="dt">%</span> <span class="dv">60</span><span class="dt">%</span><span class="fu">)</span><span class="op">;</span> }</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    me span<span class="fu">.icon</span> { <span class="kw">font-size</span><span class="ch">:</span><span class="dv">16</span><span class="dt">pt</span><span class="op">;</span> }</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>garlic <span class="dt">&lt;</span><span class="kw">span</span><span class="ot"> class</span><span class="op">=</span><span class="st">"icon"</span><span class="dt">&gt;</span>üßÑ<span class="dt">&lt;/</span><span class="kw">span</span><span class="dt">&gt;</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> vampire hx-get</span><span class="op">=</span><span class="st">"/test"</span><span class="ot"> hx-select</span><span class="op">=</span><span class="st">"button[garlic]"</span><span class="ot"> hx-swap</span><span class="op">=</span><span class="st">"afterend"</span><span class="dt">&gt;</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>   <span class="dt">&lt;</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>    me { <span class="kw">margin</span><span class="ch">:</span> <span class="dv">4</span><span class="dt">px</span><span class="op">;</span> <span class="kw">padding</span><span class="ch">:</span> <span class="dv">10</span><span class="dt">px</span> <span class="dv">30</span><span class="dt">px</span><span class="op">;</span> <span class="kw">min-width</span><span class="ch">:</span> <span class="dv">80</span><span class="dt">px</span><span class="op">;</span> <span class="kw">background</span><span class="ch">:</span> <span class="fu">hsl(</span><span class="dv">150</span> <span class="dv">80</span><span class="dt">%</span> <span class="dv">47</span><span class="dt">%</span><span class="fu">)</span><span class="op">;</span> <span class="kw">border-bottom</span><span class="ch">:</span> <span class="dv">0.5</span><span class="dt">rem</span> <span class="dv">solid</span> <span class="fu">hsl(</span><span class="dv">264</span> <span class="dv">80</span><span class="dt">%</span> <span class="dv">20</span><span class="dt">%</span><span class="fu">)</span><span class="op">;</span> }</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>    me { <span class="kw">color</span><span class="ch">:</span> <span class="cn">antiquewhite</span><span class="op">;</span> <span class="kw">font-size</span><span class="ch">:</span> <span class="dv">14</span><span class="dt">pt</span><span class="op">;</span> <span class="kw">font-variant</span><span class="ch">:</span> <span class="dv">all-small-caps</span><span class="op">;</span> <span class="kw">font-weight</span><span class="ch">:</span> <span class="dv">bold</span><span class="op">;</span> }</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>    me<span class="in">:hover</span> { <span class="kw">background</span><span class="ch">:</span> <span class="fu">hsl(</span><span class="dv">150</span> <span class="dv">80</span><span class="dt">%</span> <span class="dv">60</span><span class="dt">%</span><span class="fu">)</span><span class="op">;</span> }</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>    me span<span class="fu">.icon</span> { <span class="kw">font-size</span><span class="ch">:</span><span class="dv">16</span><span class="dt">pt</span><span class="op">;</span> }</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>vampire <span class="dt">&lt;</span><span class="kw">span</span><span class="ot"> class</span><span class="op">=</span><span class="st">"icon"</span><span class="dt">&gt;</span>üßõ<span class="dt">&lt;/</span><span class="kw">span</span><span class="dt">&gt;</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell-output cell-output-display">
<button garlic="" hx-get="/test" hx-select="button[vampire]" hx-swap="afterend">
   <style>
    me { margin: 4px; padding: 10px 30px; min-width: 80px; background: hsl(264 80% 47%); border-bottom: 0.5rem solid hsl(264 80% 20%); }
    me { color: antiquewhite; font-size: 14pt; font-variant: all-small-caps; font-weight: bold; }
    me:hover { background: hsl(264 80% 60%); }
    me span.icon { font-size:16pt; }
</style>
garlic <span class="icon">üßÑ</span>
</button>
<button vampire="" hx-get="/test" hx-select="button[garlic]" hx-swap="afterend">
   <style>
    me { margin: 4px; padding: 10px 30px; min-width: 80px; background: hsl(150 80% 47%); border-bottom: 0.5rem solid hsl(264 80% 20%); }
    me { color: antiquewhite; font-size: 14pt; font-variant: all-small-caps; font-weight: bold; }
    me:hover { background: hsl(150 80% 60%); }
    me span.icon { font-size:16pt; }
</style>
vampire <span class="icon">üßõ</span>
</button>

<brd-mark id="b0a771e5b-1e6a4043-16df5c52-d77f98bf"></brd-mark>
</div>
</div>
<div id="cell-29" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>brt_cli(<span class="st">'/test'</span>)<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<button garlic="" hx-get="/test" hx-select="button[vampire]" hx-swap="afterend">
   <style>
    me { margin: 4px; padding: 10px 30px; min-width: 80px; background: hsl(264 80% 47%); border-bottom: 0.5rem solid hsl(264 80% 20%); }
    me { color: antiquewhite; font-size: 14pt; font-variant: all-small-caps; font-weight: bold; }
    me:hover { background: hsl(264 80% 60%); }
    me span.icon { font-size:16pt; }
</style>
garlic <span class="icon">üßÑ</span>
</button>
<button vampire="" hx-get="/test" hx-select="button[garlic]" hx-swap="afterend">
   <style>
    me { margin: 4px; padding: 10px 30px; min-width: 80px; background: hsl(150 80% 47%); border-bottom: 0.5rem solid hsl(264 80% 20%); }
    me { color: antiquewhite; font-size: 14pt; font-variant: all-small-caps; font-weight: bold; }
    me:hover { background: hsl(150 80% 60%); }
    me span.icon { font-size:16pt; }
</style>
vampire <span class="icon">üßõ</span>
</button>

<brd-mark id="7ded6d040d05938d238c4ea81c49fa2a"></brd-mark>
</div>
</div>
<div id="cell-30" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>brt_cli(Buttons())<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<button garlic="" hx-get="/test" hx-select="button[vampire]" hx-swap="afterend">
  <style>
    me { margin: 4px; padding: 10px 30px; min-width: 80px; background: hsl(264 80% 47%); border-bottom: 0.5rem solid hsl(264 80% 20%); }
    me { color: antiquewhite; font-size: 14pt; font-variant: all-small-caps; font-weight: bold; }
    me:hover { background: hsl(264 80% 60%); }
    me span.icon { font-size:16pt; }
</style>
garlic <span class="icon">üßÑ</span>
</button>
<button vampire="" hx-get="/test" hx-select="button[garlic]" hx-swap="afterend">
  <style>
    me { margin: 4px; padding: 10px 30px; min-width: 80px; background: hsl(150 80% 47%); border-bottom: 0.5rem solid hsl(264 80% 20%); }
    me { color: antiquewhite; font-size: 14pt; font-variant: all-small-caps; font-weight: bold; }
    me:hover { background: hsl(150 80% 60%); }
    me span.icon { font-size:16pt; }
</style>
vampire <span class="icon">üßõ</span>
</button>

<brd-mark id="f8508c42ac4e90e839dc9c2651e329fe"></brd-mark>
</div>
</div>
<div id="cell-31" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># css = Style(':root {--pico-font-size:90%,--pico-font-family: Pacifico, cursive;}')</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="at">@app.route</span>(<span class="st">"/page"</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get():</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (Title(<span class="st">"Hello World"</span>), </span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>            Main(H1(<span class="st">'Hello, World'</span>), cls<span class="op">=</span><span class="st">"container"</span>))</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> brt_cli._response(req <span class="op">:=</span> {</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 'headers': {'hx-request': '1'},</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'method'</span>: <span class="st">'GET'</span>,</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'url'</span>: <span class="st">'http://nb/page'</span>,</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>display(Markdown(<span class="ss">f"```HTML</span><span class="ch">\n</span><span class="sc">{</span>r<span class="sc">.</span>text<span class="sc">}</span><span class="ch">\n</span><span class="ss">```"</span>))</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>brt_cli(<span class="st">'page'</span>)<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a> <span class="dt">&lt;!doctype</span> html<span class="dt">&gt;</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a> <span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>   <span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>     <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Hello World<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>     <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"canonical"</span><span class="ot"> href</span><span class="op">=</span><span class="st">"http://nb/page"</span><span class="dt">&gt;</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">sendmsg</span>() {</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>        <span class="bu">window</span><span class="op">.</span><span class="at">parent</span><span class="op">.</span><span class="fu">postMessage</span>({<span class="dt">height</span><span class="op">:</span> <span class="bu">document</span><span class="op">.</span><span class="at">documentElement</span><span class="op">.</span><span class="at">offsetHeight</span>}<span class="op">,</span> <span class="st">'*'</span>)<span class="op">;</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">window</span><span class="op">.</span><span class="at">onload</span> <span class="op">=</span> <span class="kw">function</span>() {</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sendmsg</span>()<span class="op">;</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>        <span class="bu">document</span><span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">'htmx:afterSettle'</span><span class="op">,</span>    sendmsg)<span class="op">;</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>        <span class="bu">document</span><span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">'htmx:wsAfterMessage'</span><span class="op">,</span> sendmsg)<span class="op">;</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span><span class="dt">&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span>   <span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>   <span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">main</span><span class="ot"> class</span><span class="op">=</span><span class="st">"container"</span><span class="dt">&gt;</span>       <span class="dt">&lt;</span><span class="kw">h1</span><span class="dt">&gt;</span>Hello, World<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">main</span><span class="dt">&gt;</span>   <span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a> <span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell-output cell-output-display">
 <title>Hello World</title>
<main class="container">   <h1>Hello, World</h1>
</main>
<brd-mark id="d3bb254d1ac71f59ad66cfd7dcd023f2"></brd-mark>
</div>
</div>
<div id="cell-32" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>dtl <span class="op">=</span> Details(cls<span class="op">=</span><span class="st">'pale'</span>, <span class="bu">open</span><span class="op">=</span><span class="va">True</span>)(</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    Style(<span class="st">'me details { border: 1px solid #aaa; padding: 0.5em 0.5em 0; } me summary { font-weight: bold; margin: -0.5em -0.5em 0; padding: 0.5em; } me pre { margin: 0; }'</span>),</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    Summary(<span class="st">'What Lucy get?'</span>),</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    Div(cls<span class="op">=</span><span class="st">'contents'</span>, style<span class="op">=</span><span class="st">'display: flex; flex-direction: column;'</span>)(</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>        Pre(<span class="st">'She'</span>),</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>        Pre(<span class="st">'got'</span>),</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>        Pre(<span class="st">'diamonds!'</span>)</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>display(dtl)</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>brt_cli(dtl)<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<details open="" class="pale"><style>me details { border: 1px solid #aaa; padding: 0.5em 0.5em 0; } me summary { font-weight: bold; margin: -0.5em -0.5em 0; padding: 0.5em; } me pre { margin: 0; }</style><summary>What Lucy get?</summary><div class="contents" style="display: flex; flex-direction: column;"><pre>She</pre><pre>got</pre><pre>diamonds!</pre></div></details>
<brd-mark id="b626bd1d2-76339ea6-7a748cd7-21b0050d"></brd-mark>
</div>
<div class="cell-output cell-output-display">
<details open="" class="pale">  <style>me details { border: 1px solid #aaa; padding: 0.5em 0.5em 0; } me summary { font-weight: bold; margin: -0.5em -0.5em 0; padding: 0.5em; } me pre { margin: 0; }</style>
<summary>What Lucy get?</summary>  <div class="contents" style="display: flex; flex-direction: column;">
<pre>She</pre><pre>got</pre><pre>diamonds!</pre>  </div>
</details>
<brd-mark id="2eb4d13a81062a09d245a1edeb7a1810"></brd-mark>
</div>
</div>
<div id="cell-33" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> details_ft(</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>contents, </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>        summary:<span class="bu">str</span><span class="op">|</span><span class="va">None</span><span class="op">=</span><span class="va">None</span>, </span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>        closed:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>        direction:<span class="bu">str</span><span class="op">=</span><span class="st">'column'</span>, </span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>        height:<span class="bu">str</span><span class="op">|</span><span class="va">None</span><span class="op">=</span><span class="va">None</span>,</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>        contents_style:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, item_style:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>):</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    style <span class="op">=</span> <span class="ss">f"display: flex; flex-direction: </span><span class="sc">{</span>direction<span class="sc">}</span><span class="ss">;</span><span class="sc">{</span>height <span class="kw">or</span> <span class="st">''</span><span class="sc">}{</span>contents_style <span class="kw">or</span> <span class="st">''</span><span class="sc">}</span><span class="ss">"</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Details(cls<span class="op">=</span><span class="st">'pale'</span>, <span class="bu">open</span><span class="op">=</span><span class="kw">not</span> closed)(</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>        Summary(summary),</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>        Div(cls<span class="op">=</span><span class="st">'contents'</span>, style<span class="op">=</span>style)(</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>            <span class="op">*</span>(Div(style<span class="op">=</span>item_style)(_) <span class="cf">for</span> _ <span class="kw">in</span> contents)</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>dtl <span class="op">=</span> details_ft(</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>(Pre(_) <span class="cf">for</span> _ <span class="kw">in</span> (<span class="st">'She'</span>, <span class="st">'got'</span>, <span class="st">'diamonds'</span>)), </span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>        summary<span class="op">=</span><span class="st">'What Lucy get?'</span>)</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>display(dtl)</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>brt_cli(dtl)<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<details open="" class="pale"><summary>What Lucy get?</summary><div class="contents" style="display: flex; flex-direction: column;"><div><pre>She</pre></div><div><pre>got</pre></div><div><pre>diamonds</pre></div></div></details>
<brd-mark id="b8bcfb351-7a231c98-d0381b72-12936838"></brd-mark>
</div>
<div class="cell-output cell-output-display">
<details open="" class="pale"><summary>What Lucy get?</summary>  <div class="contents" style="display: flex; flex-direction: column;">
    <div>
<pre>She</pre>    </div>
    <div>
<pre>got</pre>    </div>
    <div>
<pre>diamonds</pre>    </div>
  </div>
</details>
<brd-mark id="a4227c1b47483e13743506a9786b8aaf"></brd-mark>
</div>
</div>
<div id="cell-34" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>bridge.logger.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="brd-logger_2-1764771735" class="brd-logger" style="width: 100%; max-height: 200px;"></div>
<brd-mark id="bca051957-dd9636d9-395456de-30d33f14"></brd-mark>
</div>
</div>
<p>As there only one instance of a logger running, use <code>logger.show()</code> to display the logger near a cell to see what‚Äôs going on.</p>
<div id="cell-36" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>div <span class="bu">id</span><span class="op">=</span><span class="st">"output-99"</span><span class="op">&gt;</span>Original<span class="op">&lt;/</span>div<span class="op">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">

<div id="output-99">Original</div>

<brd-mark id="bee6018d1-c00d2ba2-8f45b6e8-25f19f58"></brd-mark>
</div>
</div>
<div id="cell-37" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>bridge.commander.swap(<span class="st">'#output-99'</span>, <span class="st">'&lt;div&gt;Swapped!&lt;/div&gt;'</span>, swapStyle<span class="op">=</span><span class="st">'innerHTML'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We can also use HTMX API through Bridge (documented in <a href="./bridge_plugins.html">16_bridge_plugins.ipynb</a>).</p>
<p>But we‚Äôll see a more convenient way with Bridget, without peppering the notebook of IPython Javascript display objects.</p>
<div id="cell-39" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fbridge(Div('Hey, Foo!'), display_id='ultra-cool-display-id')</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>Div(<span class="st">'Hey, Foo!'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>Hey, Bar!</div>

<brd-mark id="b19bb1220-2ed4d515-97c612e0-ac834264"></brd-mark>
</div>
</div>
<div id="cell-40" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># bridge(Div('Hey, Bar!'), display_id=did, update=True)</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>dh <span class="op">=</span> bridge.nbhooks.brdd.dh</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>brt_cli(Div(<span class="st">'Hey, Bar!'</span>), display_id<span class="op">=</span>dh)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Use <code>display_id</code> and <a href="https://civvic.github.io/bridget/nb_hooks.html#update"><code>update</code></a> kwargs to modify or update an existing output cell.</p>
</section>
</section>
<section id="bridget-plugin" class="level1">
<h1>Bridget plugin</h1>
<blockquote class="blockquote">
<p>A specialization of <a href="https://civvic.github.io/bridget/bridge.html#bridge"><code>Bridge</code></a> that connects HTMX with FastHTML in notebooks.</p>
</blockquote>
<hr>
<p><a href="https://github.com/civvic/bridget/blob/main/bridget/bridget.py#L242" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="get_bridget" class="level3">
<h3 class="anchored" data-anchor-id="get_bridget">get_bridget</h3>
<blockquote class="blockquote">
<pre><code> get_bridget (app=None, logger:NBLogger|None=None, show_logger:bool=False,
              lnks:dict[str,FT]|None=None,
              esms:dict[str,str|Path]|None=None,
              plugins:Sequence[BridgePlugin]|None=None,
              kwplugins:dict[str,str]|None=None, wait:int=0,
              summary:bool=False, factory:Callable[...,Any]|None=None,
              timeout:float=10, sleep:float=0.2, n:int=10,
              show:Callable[[bool],None]|None=None, **kwargs)</code></pre>
</blockquote>
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>app</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>logger</td>
<td>NBLogger | None</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>show_logger</td>
<td>bool</td>
<td>False</td>
<td></td>
</tr>
<tr class="even">
<td>lnks</td>
<td>dict[str, FT] | None</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>esms</td>
<td>dict[str, str | Path] | None</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>plugins</td>
<td>Sequence[BridgePlugin] | None</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>kwplugins</td>
<td>dict[str, str] | None</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>wait</td>
<td>int</td>
<td>0</td>
<td></td>
</tr>
<tr class="odd">
<td>summary</td>
<td>bool</td>
<td>False</td>
<td></td>
</tr>
<tr class="even">
<td>factory</td>
<td>Callable[‚Ä¶, Any] | None</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>timeout</td>
<td>float</td>
<td>10</td>
<td></td>
</tr>
<tr class="even">
<td>sleep</td>
<td>float</td>
<td>0.2</td>
<td></td>
</tr>
<tr class="odd">
<td>n</td>
<td>int</td>
<td>10</td>
<td></td>
</tr>
<tr class="even">
<td>show</td>
<td>Callable[[bool], None] | None</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>kwargs</td>
<td>VAR_KEYWORD</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>Returns</strong></td>
<td><strong>Bridget</strong></td>
<td></td>
<td><strong>type: ignore</strong></td>
</tr>
</tbody>
</table>
<hr>
<p><a href="https://github.com/civvic/bridget/blob/main/bridget/bridget.py#L199" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="bridget" class="level3">
<h3 class="anchored" data-anchor-id="bridget">Bridget</h3>
<blockquote class="blockquote">
<pre><code> Bridget (app:fasthtml.core.FastHTML|None=None, *args, **kwargs)</code></pre>
</blockquote>
<p><em>Inherit from this to have all attr accesses in <code>self._xtra</code> passed down to <code>self.default</code></em></p>
<p>Bridget is a specialized widget that: 1. Inherits from <code>BridgeBase</code> for FastHTML/display functionality 2. Uses <a href="https://anywidget.dev/">AnyWidget</a> tooling-free, general widget solution, for browser-kernel communication 3. Implements a singleton pattern to ensure one instance per notebook</p>
<p>Attributes: - <code>_esm</code>: Path to bundled JavaScript module - <code>request</code>/<code>response</code>: Traitlets for HTMX communication - <code>htmx</code>/<code>htmx_sels</code>: Configuration for HTMX integration</p>
<p>The core part is using the widget‚Äôs bidirectional communication to replace HTMX‚Äôs HTTP transport: 1. Browser: HTMX makes requests thinking it‚Äôs talking to a server 2. Widget: Captures these requests via traitlets 3. Kernel: Processes requests using FastHTML routing 4. Widget: Returns responses that HTMX understands</p>
</section>
<section id="bridget-javascript-implementation-bridget.js" class="level2">
<h2 class="anchored" data-anchor-id="bridget-javascript-implementation-bridget.js">Bridget JavaScript Implementation <a href="bridget.js">bridget.js</a></h2>
<p>Bridget‚Äôs JavaScript code provides the browser-side implementation that: 1. Intercepts HTMX AJAX requests (SSE, WS in the future) 2. Routes them through the widget‚Äôs communication channel 3. Processes responses back to HTMX 4. Manages HTMX initialization in notebook output cells</p>
<section id="some-details" class="level3">
<h3 class="anchored" data-anchor-id="some-details">Some details</h3>
<section id="request-flow" class="level4">
<h4 class="anchored" data-anchor-id="request-flow">Request Flow</h4>
<ol type="1">
<li>HTMX makes an AJAX request</li>
<li><a href="https://github.com/jpillora/xhook/tree/main">xhook</a> intercepts it via <code>on_request</code></li>
<li>Request is serialized and sent to kernel via traitlets</li>
<li>Kernel processes request and sends response</li>
<li>Response is processed by <code>response_changed</code></li>
<li>HTMX receives response and updates DOM</li>
</ol>
</section>
<section id="htmx-integration" class="level4">
<h4 class="anchored" data-anchor-id="htmx-integration">HTMX Integration</h4>
<ol type="1">
<li><code>BridgetObserver</code> watches for new notebook output cells</li>
<li>New cells are processed with <code>htmx.process()</code></li>
<li>HTMX attributes become active</li>
<li>AJAX requests are intercepted and routed through widget</li>
</ol>
<p>Note that Bridget JS is backend agnostic. We‚Äôre using FastHTML here because its the best for my quest of replacing ipywidgets as the main form of interactivity in a notebook, but it could be any other backend libarary.</p>
</section>
</section>
</section>
</section>
<section id="get_app" class="level1">
<h1>get_app</h1>
<blockquote class="blockquote">
<p>Helper function to initialize the root-level app, bridget, and route.</p>
</blockquote>
<hr>
<p><a href="https://github.com/civvic/bridget/blob/main/bridget/bridget.py#L251" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="get_app-1" class="level3">
<h3 class="anchored">get_app</h3>
<blockquote class="blockquote">
<pre><code> get_app (hooks=False, nb=False, cfg:Mapping|None=None,
          logger:NBLogger|None=None, show_logger:bool=False,
          lnks:dict[str,FT]|None=None, esms:dict[str,str|Path]|None=None,
          plugins:Sequence[BridgePlugin]|None=None,
          kwplugins:dict[str,str]|None=None, wait:int=0,
          summary:bool=False, factory:Callable[...,Any]|None=None,
          timeout:float=10, sleep:float=0.2, n:int=10,
          show:Callable[[bool],None]|None=None, **kwargs)</code></pre>
</blockquote>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>hooks</td>
<td>bool</td>
<td>False</td>
<td></td>
</tr>
<tr class="even">
<td>nb</td>
<td>bool</td>
<td>False</td>
<td></td>
</tr>
<tr class="odd">
<td>cfg</td>
<td>Mapping | None</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>logger</td>
<td>NBLogger | None</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>show_logger</td>
<td>bool</td>
<td>False</td>
<td></td>
</tr>
<tr class="even">
<td>lnks</td>
<td>dict[str, FT] | None</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>esms</td>
<td>dict[str, str | Path] | None</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>plugins</td>
<td>Sequence[BridgePlugin] | None</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>kwplugins</td>
<td>dict[str, str] | None</td>
<td>None</td>
<td></td>
</tr>
<tr class="even">
<td>wait</td>
<td>int</td>
<td>0</td>
<td></td>
</tr>
<tr class="odd">
<td>summary</td>
<td>bool</td>
<td>False</td>
<td></td>
</tr>
<tr class="even">
<td>factory</td>
<td>Callable[‚Ä¶, Any] | None</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>timeout</td>
<td>float</td>
<td>10</td>
<td></td>
</tr>
<tr class="even">
<td>sleep</td>
<td>float</td>
<td>0.2</td>
<td></td>
</tr>
<tr class="odd">
<td>n</td>
<td>int</td>
<td>10</td>
<td></td>
</tr>
<tr class="even">
<td>show</td>
<td>Callable[[bool], None] | None</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>kwargs</td>
<td>VAR_KEYWORD</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>Returns</strong></td>
<td><strong>tuple[FastHTML, Bridget, MethodType]</strong></td>
<td></td>
<td><strong>type: ignore</strong></td>
</tr>
</tbody>
</table>
<div id="cell-48" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>app, brt, rt <span class="op">=</span> get_app(show_logger<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>test_is(brt.app, app)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="brd-logger_3-1764771735" class="brd-logger" style="width: 100%; max-height: 200px;"></div>
<brd-mark id="b82cbb022-7ce7730e-3c1204c4-6ef803a1"></brd-mark>
</div>
</div>
<p>Let‚Äôs see Bridget in action.</p>
<div id="cell-50" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> counter():</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">@rt</span>(<span class="st">'/inc'</span>)</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> increment():</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">nonlocal</span> n</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>        n <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="ss">f"</span><span class="sc">{</span>n<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Div()(</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>        Button(hx_get<span class="op">=</span><span class="st">'/inc'</span>, hx_target<span class="op">=</span><span class="st">'find span'</span>, hx_swap<span class="op">=</span><span class="st">'textContent'</span>)(</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Count: '</span>, Span(<span class="ss">f"</span><span class="sc">{</span>n<span class="sc">}</span><span class="ss">"</span>)))</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>counter()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div><button hx-get="/inc" hx-swap="textContent" hx-target="find span">Count: <span>0</span></button></div>
<brd-mark id="bf841a6a7-8159a6c4-0674f15a-9a137753"></brd-mark>
</div>
</div>
<div id="cell-51" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># req = { </span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="co">#     "headers": { "HX-Request": "true", "HX-Current-URL": "vscode-webview://1ql27b0grt14rkuj26idbt9ktekivp44iu2s8pgfndvblm2j3iep/index.html?id=3d1cf833-fbc2-442d-885b-05f7dee12052&amp;origin=1e95bb6a-280d-4f6e-8090-7f55f54cbfbd&amp;swVersion=4&amp;extensionId=&amp;platform=electron&amp;vscode-resource-base-authority=vscode-resource.vscode-cdn.net&amp;parentOrigin=vscode-file%3A%2F%2Fvscode-app&amp;purpose=notebookRenderer" }, </span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co">#     "headerNames": { "hx-request": "HX-Request", "hx-current-url": "HX-Current-URL" }, </span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co">#     "status": 0, "method": "GET", "url": "/inc", "async": True, "timeout": 0, "withCredentials": False, </span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co">#     "body": None, </span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="co">#     "req_id": "652540cd-1ebe-4983-8701-88074dfe6328" }</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cell-52" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># bridge._message_hdlr(None, {'ctx': 'bridget', 'kind': 'request', 'request': req}, None)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cell-53" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> random_hsl(saturation<span class="op">=</span><span class="dv">50</span>, lightness<span class="op">=</span><span class="dv">90</span>):</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    hue <span class="op">=</span> random.randint(<span class="dv">0</span>, <span class="dv">360</span>)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="ss">f"hsl(</span><span class="sc">{</span>hue<span class="sc">}</span><span class="ss"> </span><span class="sc">{</span>saturation<span class="sc">}</span><span class="ss">% </span><span class="sc">{</span>lightness<span class="sc">}</span><span class="ss">%)"</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> counter(n<span class="op">=</span><span class="dv">0</span>):</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">@rt</span>(<span class="st">'/inc'</span>)</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> increment(n:<span class="bu">int</span>):</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> Button(<span class="ss">f"Count: </span><span class="sc">{</span>n<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">"</span>, value<span class="op">=</span><span class="ss">f"</span><span class="sc">{</span>n<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">"</span>, name<span class="op">=</span><span class="st">'n'</span>, </span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>            hx_post<span class="op">=</span><span class="st">'/inc'</span>, hx_swap<span class="op">=</span><span class="st">'outerHTML'</span>, </span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>            style<span class="op">=</span><span class="ss">f"background-color:</span><span class="sc">{</span>random_hsl()<span class="sc">}</span><span class="ss">; font-weight: bold"</span>)</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> increment(n<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>counter()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<button value="0" name="n" hx-post="/inc" hx-swap="outerHTML" style="background-color:hsl(204 50% 90%); font-weight: bold">Count: 0</button>
<brd-mark id="b2520227b-3c565285-80d6cb5b-6cc76707"></brd-mark>
</div>
</div>
<div id="cell-54" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="at">@rt</span>(<span class="st">"/test"</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get():</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Buttons()</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> Div()(</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>    H2(<span class="st">'HTMX Test'</span>),</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>    Div(<span class="st">'Swapped DOM elements are styled instantly when they arrive.'</span>),</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>    Buttons(),</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a><span class="co"># brt(html); # or simply, if bridge_cfg.auto_show is True:</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>html</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div><h2 class="anchored" data-anchor-id="get_app-1">HTMX Test</h2><div>Swapped DOM elements are styled instantly when they arrive.</div><button garlic="" hx-get="/test" hx-select="button[vampire]" hx-swap="afterend">
<style>
    me { margin: 4px; padding: 10px 30px; min-width: 80px; background: hsl(264 80% 47%); border-bottom: 0.5rem solid hsl(264 80% 20%); }
    me { color: antiquewhite; font-size: 14pt; font-variant: all-small-caps; font-weight: bold; }
    me:hover { background: hsl(264 80% 60%); }
    me span.icon { font-size:16pt; }
</style>garlic <span class="icon">üßÑ</span>
</button>
<button vampire="" hx-get="/test" hx-select="button[garlic]" hx-swap="afterend">
<style>
    me { margin: 4px; padding: 10px 30px; min-width: 80px; background: hsl(150 80% 47%); border-bottom: 0.5rem solid hsl(264 80% 20%); }
    me { color: antiquewhite; font-size: 14pt; font-variant: all-small-caps; font-weight: bold; }
    me:hover { background: hsl(150 80% 60%); }
    me span.icon { font-size:16pt; }
</style>vampire <span class="icon">üßõ</span>
</button>
</div>
<brd-mark id="b2b50d32a-e07603fa-b9a2fc21-5bef7181"></brd-mark>
</div>
</div>
<p>An example from <a href="https://github.com/gnat">gnat</a>‚Äôs <a href="https://github.com/gnat/css-scope-inline">css-scope-inline</a>. Click the buttons.</p>
<p>See <a href="./details_json.html">40_details_json.ipynb</a> for a lazy JSON browser.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Why are my output cells un-styled and/or inactive?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Because all changes made with Bridge/Bridget/FastHTML/HTMX are <strong>transient</strong>.</p>
</div>
</div>
<p>Let‚Äôs talk about what‚Äôs happening under the hood:</p>
<p>We‚Äôre modifying the DOM - the HTML structure in your browser - at runtime. This is <strong>not</strong> a notebook editor; it‚Äôs a runtime tool. For anything to work, you need to execute the cells.</p>
<p>Here‚Äôs the thing: a notebook is just <strong>JSON</strong>. Ultimately, output cells are just HTML (derived from any IPython displayable object), environments like VSCode won‚Äôt render them until display time.</p>
<p>When you open a notebook, tjhe front-end usually takes a lazy approach (VSCode/Cursor more than others): - It renders existing outputs from the JSON (including JavaScript) - But it won‚Äôt execute any cells automatically - Even ipywidgets get special (and sometimes quirky) treatment</p>
<p>Think of the notebook‚Äôs JSON as a snapshot from when you ran the cells. Any DOM changes we make don‚Äôt get saved back to this JSON.</p>
<p>This means: 1. Bridge needs explicit initialization to load its JS/CSS 2. On load, saved notebooks will execute the JavaScript/HTML put there by cell runs 3. Kernel-side code won‚Äôt run until you execute the cells</p>
<p>Could we make Bridget modify the actual notebook outputs? Technically, yes, maybe. But given the labyrinthine complexity of the Jupyter ecosystem (and the mountains of JavaScript involved), I get a headache just thinking about it. Some mountains are better left unclimbed! üòÖ</p>
</section>
</section>
<section id="simple-widget" class="level1">
<h1>Simple widget</h1>
<div id="cell-59" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> BWidget(T.HasTraits, RouteProvider):</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>    bridget: Bridget <span class="op">=</span> <span class="va">None</span>  <span class="co"># type: ignore</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    _mounted <span class="op">=</span> <span class="va">False</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> __ft__(<span class="va">self</span>): ...</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> _ipython_display_(<span class="va">self</span>):</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>        brt <span class="op">=</span> get_bridget()</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> bridge_cfg.auto_mount <span class="kw">and</span> <span class="kw">not</span> <span class="va">self</span>._mounted: brt.mount(<span class="va">self</span>, show<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>        brt(<span class="va">self</span>)<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cell-60" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> BValue(BWidget):</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>    value<span class="op">=</span>T.CInt(<span class="dv">0</span>).tag(sync<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    _updating <span class="op">=</span> <span class="va">False</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> wrapper_id(<span class="va">self</span>): <span class="cf">return</span> <span class="va">self</span>.ar.name().replace(<span class="st">':'</span>, <span class="st">'_'</span>)</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">@contextmanager</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> _update_ctx(<span class="va">self</span>):</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>._updating <span class="op">=</span> <span class="va">True</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">yield</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>._updating <span class="op">=</span> <span class="va">False</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">@T.observe</span>(<span class="st">'value'</span>)</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> on_value(<span class="va">self</span>, _):</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="va">self</span>.bridget <span class="kw">and</span> <span class="kw">not</span> <span class="va">self</span>._updating:</span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.bridget.bridge.commander.swap(<span class="ss">f"#</span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>wrapper_id()<span class="sc">}</span><span class="ss">"</span>, to_xml(<span class="va">self</span>.__ft__()), swapStyle<span class="op">=</span><span class="st">'innerHTML'</span>)</span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">@ar.post</span>(<span class="st">'/value'</span>)  <span class="co"># type: ignore</span></span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> changed(<span class="va">self</span>, value:<span class="bu">int</span>):</span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">with</span> <span class="va">self</span>._update_ctx(): <span class="va">self</span>.value <span class="op">=</span> value</span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">str</span>(value)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cell-61" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="at">@dataclasses.dataclass</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> BIntSlider(BValue):</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">min</span>:<span class="bu">int</span><span class="op">=</span><span class="dv">0</span><span class="op">;</span> <span class="bu">max</span>:<span class="bu">int</span><span class="op">=</span><span class="dv">100</span><span class="op">;</span> step:<span class="bu">int</span><span class="op">=</span><span class="dv">1</span><span class="op">;</span> readout:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span><span class="op">;</span> readout_format:<span class="bu">str</span><span class="op">=</span><span class="st">'d'</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> __ft__(<span class="va">self</span>):</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> bridge_cfg.auto_mount <span class="kw">and</span> <span class="kw">not</span> <span class="va">self</span>._mounted: get_bridget().mount(<span class="va">self</span>, show<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> Div(<span class="bu">id</span><span class="op">=</span><span class="va">self</span>.wrapper_id(), cls<span class="op">=</span><span class="st">'bridget slider'</span>)(</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>            Label(_for<span class="op">=</span><span class="st">'value'</span>)(<span class="st">'Scale'</span>), _n,</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>            Input(<span class="bu">type</span><span class="op">=</span><span class="st">'range'</span>, name<span class="op">=</span><span class="st">'value'</span>, <span class="bu">min</span><span class="op">=</span><span class="va">self</span>.<span class="bu">min</span>, <span class="bu">max</span><span class="op">=</span><span class="va">self</span>.<span class="bu">max</span>, step<span class="op">=</span><span class="va">self</span>.step, value<span class="op">=</span><span class="va">self</span>.value,</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>                <span class="co"># hx_post=f"{self.ar.to()}{self.ar.to('changed')}", hx_trigger='input changed', </span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>                hx_post<span class="op">=</span><span class="va">self</span>.ar.to(<span class="st">'changed'</span>), hx_trigger<span class="op">=</span><span class="st">'input changed'</span>, </span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>                hx_target<span class="op">=</span><span class="st">'next text'</span>, hx_swap<span class="op">=</span><span class="st">'textContent'</span>),</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>            Text(<span class="bu">id</span><span class="op">=</span><span class="st">'spanscale'</span>, style<span class="op">=</span><span class="st">'inline'</span>)(<span class="va">self</span>.value), _n</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>app.routes.clear()</span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>bridge_cfg.auto_mount <span class="op">=</span> <span class="va">True</span></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a>rp <span class="op">=</span> BIntSlider()</span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a>rp</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="BIntSlider_BIntSlider_1-1764771735" class="bridget slider">
<label for="value">Scale</label>
  <input type="range" name="value" max="100" step="1" hx-post="/BIntSlider/BIntSlider_1-1764771735/value" hx-trigger="input changed" hx-swap="textContent" hx-target="next text">
<text id="spanscale" style="inline">0</text>
</div>

<brd-mark id="c0c8a3c073e580b183c452529904098c"></brd-mark>
</div>
</div>
<div id="cell-62" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>rp.value <span class="op">=</span> <span class="dv">77</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cell-63" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>sld2 <span class="op">=</span> BIntSlider(step<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>sld2</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="BIntSlider_BIntSlider_2-1764771735" class="bridget slider">
<label for="value">Scale</label>
  <input type="range" name="value" max="100" step="2" hx-post="/BIntSlider/BIntSlider_2-1764771735/value" hx-trigger="input changed" hx-swap="textContent" hx-target="next text">
<text id="spanscale" style="inline">0</text>
</div>

<brd-mark id="9c0c00adbf5745d30e23162c6a1be863"></brd-mark>
</div>
</div>
<div id="cell-64" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> bridge_cfg(auto_mount<span class="op">=</span><span class="va">True</span>):</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>    sld3 <span class="op">=</span> BIntSlider()</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    sld4 <span class="op">=</span> BIntSlider()</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># brt.mount(sld3, show=False)</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># brt.mount(sld4, show=False)</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>    T.link((sld3, <span class="st">'value'</span>), (sld4, <span class="st">'value'</span>))</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>(box <span class="op">:=</span> Div(style<span class="op">=</span><span class="st">'display: flex; gap: 1em;'</span>)(sld3, sld4))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div style="display: flex; gap: 1em;"><div id="BIntSlider_BIntSlider_3-1764771735" class="bridget slider"><label for="value">Scale</label>
<input type="range" name="value" max="100" step="1" hx-post="/BIntSlider/BIntSlider_3-1764771735/value" hx-trigger="input changed" hx-swap="textContent" hx-target="next text"><text id="spanscale" style="inline">0</text>
</div><div id="BIntSlider_BIntSlider_4-1764771735" class="bridget slider"><label for="value">Scale</label>
<input type="range" name="value" max="100" step="1" hx-post="/BIntSlider/BIntSlider_4-1764771735/value" hx-trigger="input changed" hx-swap="textContent" hx-target="next text"><text id="spanscale" style="inline">0</text>
</div></div>
<brd-mark id="b22cd9ee1-bb0d4626-6f22f083-7b790659"></brd-mark>
</div>
</div>
<div id="cell-65" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>sld3.value <span class="op">=</span> <span class="dv">22</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>test_eq(sld4.value, <span class="dv">22</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="hydrate-tbd" class="level1">
<h1>Hydrate (TBD)</h1>
<blockquote class="blockquote">
<p>Can we edit <code>.ipynb</code>s directly to capture actual output without <code>nbformat</code> or editing the JSON in disk?</p>
</blockquote>
<div id="cell-67" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># def hydrate(bridget=True, app: FastHTML | None=None, appkw:dict[str, Any]={}, **kwargs): </span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="co">#     app, bridge, rt = get_app(True, app, appkw=appkw, **kwargs)</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="co">#     bridget = Bridget(bridge) if bridget else None</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="co">#     return app, bridge, rt, bridget</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="co"># hydrate()</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="what-about-websockets-and-sse-support" class="level1">
<h1>What about WebSockets and SSE Support?</h1>
<p>While HTMX supports WebSockets and Server-Sent Events (SSE) through extensions(<a href="https://htmx.org/docs/#web-sockets-sse">1</a>), this proof-of-concept focuses only on AJAX functionality for several reasons:</p>
<ol type="1">
<li><p><strong>Core Functionality</strong>: HTMX is primarily an AJAX framework - WS and SSE support are add-ons with simpler implementations(<a href="https://htmx.org/docs/#extensions">2</a>)</p></li>
<li><p><strong>Proof of Concept</strong>: For demonstrating the viability of using HTMX in notebooks, AJAX support is sufficient</p></li>
<li><p><strong>Future Extension</strong>: Adding WS/SSE support would be straightforward since:</p>
<ul>
<li>The notebook Comm layer already uses WebSockets</li>
<li>HTMX‚Äôs extension system is well-documented(<a href="https://htmx.org/docs/#creating-extensions">3</a>)</li>
<li>The transport layer replacement pattern is already established with AJAX</li>
</ul></li>
</ol>
<hr>
<!-- # Colophon -->


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/civvic\.github\.io\/bridget");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/civvic/bridget/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>